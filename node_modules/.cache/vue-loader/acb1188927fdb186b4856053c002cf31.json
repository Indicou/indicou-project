{"remainingRequest":"D:\\indicou\\desenvolvimento\\Indicou\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\indicou\\desenvolvimento\\Indicou\\src\\components\\business\\CardMyAdBS.vue?vue&type=style&index=0&id=12c009c2&scoped=true&lang=scss&","dependencies":[{"path":"D:\\indicou\\desenvolvimento\\Indicou\\src\\components\\business\\CardMyAdBS.vue","mtime":1624547573927},{"path":"D:\\indicou\\desenvolvimento\\Indicou\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\indicou\\desenvolvimento\\Indicou\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\indicou\\desenvolvimento\\Indicou\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\indicou\\desenvolvimento\\Indicou\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\indicou\\desenvolvimento\\Indicou\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\indicou\\desenvolvimento\\Indicou\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnRlc3Rlew0KICBtYXgtd2lkdGg6IDE4MHB4Ow0KICBtaW4td2lkdGg6IDE4MHB4Ow0KICBtaW4taGVpZ2h0OiAxODBweDsNCiAgbWF4LWhlaWdodDogMTgwcHg7DQogIG9iamVjdC1maXQ6IGNvdmVyOw0KfQ0K"},{"version":3,"sources":["CardMyAdBS.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0KA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CardMyAdBS.vue","sourceRoot":"src/components/business","sourcesContent":["<template>\r\n<div class=\"col-md-12 shadow border bg-white mb-2\" style=\"border-bottom-right-radius: 10px;border-top-right-radius: 10px;border-bottom-left-radius: 10px;border-top-left-radius: 10px;\">\r\n  <div class=\"row align-items-center\">\r\n    <div class=\"col-md-3\"><img class=\"img-fluid d-block border mx-auto my-3 rounded teste\" :src=\"data.imagem\" height=\"200px\" width=\"200px\"></div>\r\n       <div class=\"col-md-8 pt-0\">\r\n        <h4 class=\"mb-0\" style=\"font-weight:600\">{{data.titulo}}</h4>\r\n          <p>{{marca}}</p>\r\n          <div class=\"row\">\r\n          <div class=\"col-md-3 border-left ml-2 \" :key=\"item\" v-for=\"(comissao, item) in data.comissao\">\r\n              <p class=\"lead mb-0\" style=\"font-weight: 600;\" v-money-format=\"comissao.valorcomissao\"></p>\r\n              <p style=\"font-size:14px\" class=\"mb-0\">Comissão por {{comissao.tipocomissao}}</p>\r\n              </div>\r\n              <div class=\"col-md-2\"></div>\r\n                </div>\r\n                  <span class=\"badge badge-info badge-pill mt-2 mr-1\" style=\"font-size:10px\">Indicação via {{data.tipo}}</span>\r\n                  <p class=\"mt-2 mb-0 pt-1\">Data publicação: <span v-date-format=\"data.dataCriacao\"></span></p>\r\n                    </div>\r\n                  <div class=\"col-md-1 text-center d-flex flex-column justify-content-center align-items-center\">\r\n                    <div class=\"btn-group  dropleft\">\r\n                      <button class=\"btn \" data-toggle=\"dropdown\"><i class=\"fa fa-ellipsis-v fa-2x text-body\"></i></button>\r\n                  <div class=\"dropdown-menu\" style=\"\">\r\n                    <router-link v-if=\"ativo !== 'Ativo'\" class=\"dropdown-item\" :to=\"{name: 'EditAdBS', params: { id: this.idbusiness, idcard: this.id }}\">\r\n                    <i class=\"fa fa-cogs fa-1x text-body pr-2\"></i>Editar Anúncio</router-link>\r\n                    <div v-if=\"ativo !== 'Ativo'\" class=\"dropdown-divider\"></div>\r\n                  <button class=\"dropdown-item\" type=\"button\" @click=\"excluirCard()\"><i class=\"fa fa-trash fa-1x text-danger pr-2\"></i>Excluir</button>\r\n                <div class=\"dropdown-divider\"></div>\r\n                <button\r\n                v-if=\"ativo !== 'Ativo'\"\r\n              @click=\"publicarCard()\"\r\n            class=\"dropdown-item\"><i class=\"fa fa-power-off fa-1x text-body pr-2\"></i>Publicar</button>\r\n            <button\r\n                v-else\r\n              @click=\"inativarCard()\"\r\n            class=\"dropdown-item\"><i class=\"fa fa-power-off fa-1x text-body pr-2\"></i>Aguardando</button>\r\n         </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { auth, db } from '../../firebase'\r\n\r\nexport default {\r\n  name: 'CardMy',\r\n  props: {\r\n    data: { type: Object, required: true }\r\n  },\r\n  data () {\r\n    return {\r\n      iduser: '',\r\n      marca: '',\r\n      idbusiness: '',\r\n      id: this.data.id,\r\n      titulo: this.data.titulo,\r\n      sobre: this.data.sobre,\r\n      filtro: this.data.filtro,\r\n      tiponegocio: this.data.tiponegocio,\r\n      termo: this.data.termo,\r\n      tipo: this.data.tipo,\r\n      imagem: this.data.imagem,\r\n      comissao: this.data.comissao,\r\n      regiao: this.data.regiao,\r\n      locais: this.data.locais,\r\n      forms: this.data.forms,\r\n      fisico: this.data.fisico,\r\n      dataCriacao: this.data.dataCriacao,\r\n      ativo: this.data.ativo,\r\n      user: [],\r\n      formularios: []\r\n    }\r\n  },\r\n  created () {\r\n    this.getUser()\r\n  },\r\n  methods: {\r\n    getUser () {\r\n      var user = auth.currentUser\r\n      if (user != null) {\r\n        this.iduser = user.uid\r\n      }\r\n      const ref = db.collection('users').doc(this.iduser).get()\r\n      ref.then(doc => {\r\n        this.idbusiness = doc.data().businessid\r\n      }).then(() => {\r\n        db.collection('business').doc(this.idbusiness).get()\r\n          .then(doc => {\r\n            this.marca = doc.data().marca\r\n          })\r\n      })\r\n      /* eslint-disable */\r\n      const refd = db.collection('mercado').doc(this.id).get()\r\n      refd.then(doc => {\r\n        this.user = doc.data().user\r\n      }).then(() => {\r\n        const teste = this.user\r\n        if (teste !== undefined) {\r\n          for(var i=0; i<teste.length; i++) {\r\n        const reft = db.collection('users').doc(teste[i]).collection('Forms').get()\r\n        reft.then(snapshot => {\r\n        snapshot.forEach(doc => {\r\n          this.formularios.push(doc.data())\r\n        })\r\n      })\r\n      }\r\n      }\r\n      })\r\n    },\r\n    publicarCard () {\r\n      if (this.locais === undefined) {\r\n        this.locais = []\r\n      }\r\n      if (this.dataCriacao === undefined) {\r\n        this.dataCriacao = ''\r\n      }\r\n      db.collection('mercado').doc(this.id).set({\r\n        id: this.id,\r\n        titulo: this.titulo,\r\n        sobre: this.sobre,\r\n        filtro: this.filtro,\r\n        tiponegocio: this.tiponegocio,\r\n        termo: this.termo,\r\n        tipo: this.tipo,\r\n        empresa: this.marca,\r\n        imagem: this.imagem,\r\n        uid: this.iduser,\r\n        comissao: this.comissao,\r\n        regiao: this.regiao,\r\n        locais: this.locais,\r\n        forms: this.forms,\r\n        fisico: this.fisico,\r\n        idbusiness: this.idbusiness,\r\n        dataCriacao: this.dataCriacao,\r\n        ativo: 'Ativo',\r\n        contform: 0\r\n      }, { merge: true })\r\n      db.collection('business').doc(this.idbusiness).collection('Cards').doc(this.id).set({\r\n        ativo: 'Ativo'\r\n      }, { merge: true }).then(() => {\r\n        this.$router.go()\r\n      })\r\n    },\r\n    inativarCard () {\r\n      /* eslint-disable */\r\n      db.collection('mercado').doc(this.id).set({\r\n        ativo: 'Aguardando'\r\n      }, { merge: true })\r\n      db.collection('business').doc(this.idbusiness).collection('Cards').doc(this.id).set({\r\n        ativo: 'Aguardando'\r\n      }, { merge: true }).then(() => {\r\n        this.$router.go()\r\n      })\r\n      /* eslint-enable */\r\n    },\r\n    excluirCard () {\r\n      /* eslint-disable */\r\n      db.collection('mercado').doc(this.id).set({\r\n        ativo: 'Excluido'\r\n      }, { merge: true })\r\n      db.collection('business').doc(this.idbusiness).collection('Cards').doc(this.id).delete().then(() => {\r\n        this.$router.go()\r\n      })\r\n      /* eslint-enable */\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.teste{\r\n  max-width: 180px;\r\n  min-width: 180px;\r\n  min-height: 180px;\r\n  max-height: 180px;\r\n  object-fit: cover;\r\n}\r\n</style>\r\n"]}]}