{"remainingRequest":"D:\\indicou\\desenvolvimento\\Indicou\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\indicou\\desenvolvimento\\Indicou\\src\\components\\results\\CardResults.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\indicou\\desenvolvimento\\Indicou\\src\\components\\results\\CardResults.vue","mtime":1624503692430},{"path":"D:\\indicou\\desenvolvimento\\Indicou\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\indicou\\desenvolvimento\\Indicou\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\indicou\\desenvolvimento\\Indicou\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\indicou\\desenvolvimento\\Indicou\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBhdXRoLCBkYiB9IGZyb20gJy4uLy4uL2ZpcmViYXNlJw0KaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0NhcmRSZXN1bHQnLA0KICBwcm9wczogew0KICAgIGRhdGE6IHsgdHlwZTogT2JqZWN0LCByZXF1aXJlZDogdHJ1ZSB9LA0KICAgIGRhdGU6IHsgdHlwZTogQXJyYXksIHJlcXVpcmVkOiB0cnVlIH0NCiAgfSwNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGlkY2FyZDogdGhpcy5kYXRhLmlkLA0KICAgICAgdXNlcnVpZDogbnVsbCwNCiAgICAgIGZvcm06IFtdLA0KICAgICAgdmFsaWRvczogW10sDQogICAgICBmYXR1cmFkb3M6IFtdDQogICAgfQ0KICB9LA0KICBjcmVhdGVkICgpIHsNCiAgICB0aGlzLmdldFVzZXIoKQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIHNvbWFJbmRpY2FjYW8gKCkgew0KICAgICAgaWYgKHRoaXMuZm9ybSAhPT0gbnVsbCkgew0KICAgICAgICByZXR1cm4gdGhpcy5mb3JtDQogICAgICAgICAgLmZpbHRlcihpbmRleCA9PiAodGhpcy5kYXRlWzBdIDw9IG1vbWVudChpbmRleC5kYXRhQ3JpYWNhbykuZm9ybWF0KCdERC9NTS9ZWVlZJykgJiYgbW9tZW50KGluZGV4LmRhdGFDcmlhY2FvKS5mb3JtYXQoJ0REL01NL1lZWVknKSA8PSB0aGlzLmRhdGVbMV0pKS5sZW5ndGgNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiAwDQogICAgICB9DQogICAgfSwNCiAgICBzb21hVmFsb3IgKCkgew0KICAgICAgaWYgKHRoaXMuZmF0dXJhZG9zICE9PSBudWxsKSB7DQogICAgICAgIHJldHVybiB0aGlzLmZhdHVyYWRvcy5maWx0ZXIoaW5kZXggPT4gKHRoaXMuZGF0ZVswXSA8PSBtb21lbnQoaW5kZXguZGF0YUNyaWFjYW8pLmZvcm1hdCgnREQvTU0vWVlZWScpICYmIG1vbWVudChpbmRleC5kYXRhQ3JpYWNhbykuZm9ybWF0KCdERC9NTS9ZWVlZJykgPD0gdGhpcy5kYXRlWzFdKSkucmVkdWNlKChhLCBiKSA9PiB7DQogICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoYSkgKyBwYXJzZUZsb2F0KGIuY29taXNzYW8udmFsb3Jjb21pc3NhbykNCiAgICAgICAgfSwgMCkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiAwDQogICAgICB9DQogICAgfSwNCiAgICBzb21hVmFsaWRvcyAoKSB7DQogICAgICBpZiAodGhpcy52YWxpZG9zICE9PSBudWxsKSB7DQogICAgICAgIHJldHVybiB0aGlzLnZhbGlkb3MuZmlsdGVyKGluZGV4ID0+ICh0aGlzLmRhdGVbMF0gPD0gbW9tZW50KGluZGV4LmRhdGFDcmlhY2FvKS5mb3JtYXQoJ0REL01NL1lZWVknKSAmJiBtb21lbnQoaW5kZXguZGF0YUNyaWFjYW8pLmZvcm1hdCgnREQvTU0vWVlZWScpIDw9IHRoaXMuZGF0ZVsxXSkpLmxlbmd0aA0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIDANCiAgICAgIH0NCiAgICB9LA0KICAgIHNvbWFGYXR1cmFkb3MgKCkgew0KICAgICAgaWYgKHRoaXMuZmF0dXJhZG9zICE9PSBudWxsKSB7DQogICAgICAgIHJldHVybiB0aGlzLmZhdHVyYWRvcy5maWx0ZXIoaW5kZXggPT4gKHRoaXMuZGF0ZVswXSA8PSBtb21lbnQoaW5kZXguZGF0YUNyaWFjYW8pLmZvcm1hdCgnREQvTU0vWVlZWScpICYmIG1vbWVudChpbmRleC5kYXRhQ3JpYWNhbykuZm9ybWF0KCdERC9NTS9ZWVlZJykgPD0gdGhpcy5kYXRlWzFdKSkubGVuZ3RoDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gMA0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldFVzZXIgKCkgew0KICAgICAgdmFyIHVzZXIgPSBhdXRoLmN1cnJlbnRVc2VyDQogICAgICBpZiAodXNlciAhPSBudWxsKSB7DQogICAgICAgIHRoaXMudXNlcnVpZCA9IHVzZXIudWlkDQogICAgICB9DQogICAgICBjb25zdCByZWZ0ID0gZGIuY29sbGVjdGlvbignY2FyZHN1c2VycycpLmRvYyh0aGlzLnVzZXJ1aWQpLmNvbGxlY3Rpb24oJ0NhcmRzJykuZG9jKHRoaXMuaWRjYXJkKS5jb2xsZWN0aW9uKCdGb3JtcycpLmdldCgpDQogICAgICByZWZ0LnRoZW4oc25hcHNob3QgPT4gew0KICAgICAgICBzbmFwc2hvdC5mb3JFYWNoKGRvYyA9PiB7DQogICAgICAgICAgdGhpcy5mb3JtLnB1c2goZG9jLmRhdGEoKSkNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgICBjb25zdCByZWZhID0gZGIuY29sbGVjdGlvbignY2FyZHN1c2VycycpLmRvYyh0aGlzLnVzZXJ1aWQpLmNvbGxlY3Rpb24oJ0Zvcm1zJykud2hlcmUoJ2lkY2FyZCcsICc9PScsIHRoaXMuaWRjYXJkKQ0KICAgICAgICAud2hlcmUoJ3Zpc3RvZW1wcmVzYScsICdpbicsIFsnVmVuZGEgcmVhbGl6YWRhJywgJ0NvbnZlcnPDo28gcmVhbGl6YWRhJywgJ0NvbnZlcnNhIEluaWNpYWRhJywgJ0NhZGFzdHJvIGVmZXR1YWRvJywgJ0FnZW5kYW1lbnRvIHJlYWxpemFkbycsICdPIEluZGljYWRvIMOpIHVtIGxlYWQgKGZpY291IGludGVyZXNzYWRvKSddKQ0KICAgICAgICAuZ2V0KCkNCiAgICAgIHJlZmEudGhlbihzbmFwc2hvdCA9PiB7DQogICAgICAgIHNuYXBzaG90LmZvckVhY2goZG9jID0+IHsNCiAgICAgICAgICB0aGlzLnZhbGlkb3MucHVzaChkb2MuZGF0YSgpKQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICAgIGNvbnN0IHJlZmMgPSBkYi5jb2xsZWN0aW9uKCdjYXJkc3VzZXJzJykuZG9jKHRoaXMudXNlcnVpZCkuY29sbGVjdGlvbignRm9ybXMnKS53aGVyZSgnaWRjYXJkJywgJz09JywgdGhpcy5pZGNhcmQpDQogICAgICAgIC53aGVyZSgndmlzdG9lbXByZXNhJywgJ2luJywgWydWZW5kYSByZWFsaXphZGEnLCAnQ2FkYXN0cm8gZWZldHVhZG8nLCAnQ29udmVyc8OjbyByZWFsaXphZGEnXSkNCiAgICAgICAgLmdldCgpDQogICAgICByZWZjLnRoZW4oc25hcHNob3QgPT4gew0KICAgICAgICBzbmFwc2hvdC5mb3JFYWNoKGRvYyA9PiB7DQogICAgICAgICAgdGhpcy5mYXR1cmFkb3MucHVzaChkb2MuZGF0YSgpKQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["CardResults.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CardResults.vue","sourceRoot":"src/components/results","sourcesContent":["<template>\r\n  <div class=\"card mb-2 shadow-sm\">\r\n                <div class=\"card-body pl-5 py-2\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-md-5 pt-2 pl-5\">\r\n                      <h5 class=\"pl-4 card-title mb-1 text-left\">{{data.titulo}}&nbsp;</h5>\r\n                      <p class=\"pl-4 card-subtitle text-muted text-left fw-700\">{{somaIndicacao}} indicações</p>\r\n                    </div>\r\n                    <div class=\"text-right col-md-5 py-1 pl-5\">\r\n                      <div class=\"row\">\r\n                        <div class=\"col-md-2 pt-2 px-0 d-flex flex-column align-items-center\">\r\n                          <div class=\"row\">\r\n                            <div class=\"col-md-6 flex-row align-items-center d-flex justify-content-end px-0 pr-1\" ><i class=\"fa fa-check-circle fa-lg\" style=\"padding-top:2px\"></i></div>\r\n                            <div class=\"col-md-6 px-0 d-flex flex-row justify-content-start align-items-start pt-1\" >\r\n                              <p class=\"mb-0\">{{somaValidos}}</p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"col-md-2 pr-0 pt-2\">\r\n                          <div class=\"row\">\r\n                            <div class=\"col-md-6 flex-row align-items-center d-flex justify-content-end px-0 pr-1\" ><i class=\"fa fa-trophy fa-lg\" style=\"padding-top:2px\"></i></div>\r\n                            <div class=\"col-md-6 px-0 d-flex flex-row justify-content-start align-items-start pt-1\" >\r\n                              <p class=\"mb-0\">{{somaFaturados}}</p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"pt-2 col-md-3\">\r\n                          <div class=\"row\">\r\n                            <div class=\"col-md-6 flex-row align-items-center d-flex justify-content-end px-0 pr-1\"><i class=\"fas fa-money-bill-alt icon-color fa-lg\" style=\"padding-top:2px\"></i></div>\r\n                            <div class=\"col-md-6 px-0 d-flex flex-row justify-content-start align-items-start pt-1\" >\r\n                              <p class=\"mb-0\" v-din-format=\"somaValor\"></p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"col-md-4\">\r\n                          <router-link :to=\"{name: 'InfoResults', params: { id: this.data.id }}\" :disabled=\"somaIndicacao == 0\" tag=\"button\" class=\"btn btn-lg btn-primary text-white fw-600 mt-1\" style=\"font-size: 17px;width: 150px;background:linear-gradient(102deg, #2eff83, #4ac9a9);margin-top: 2px;\">Resultados</router-link>\r\n                          </div>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"col-md-2\" style=\"padding-top:8px\">\r\n                      <div class=\"btn-group dropright\">\r\n                        <button class=\"btn btn-link\" data-toggle=\"dropdown\" aria-expanded=\"false\"> <i class=\"text-dark fa fa-2x fa-ellipsis-v\"></i></button>\r\n                        <div class=\"dropdown-menu\" x-placement=\"right-start\" style=\"position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(33px, 0px, 0px);\">\r\n                          <a class=\"dropdown-item\" href=\"#\">Configurações</a>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n</template>\r\n\r\n<script>\r\nimport { auth, db } from '../../firebase'\r\nimport moment from 'moment'\r\n\r\nexport default {\r\n  name: 'CardResult',\r\n  props: {\r\n    data: { type: Object, required: true },\r\n    date: { type: Array, required: true }\r\n  },\r\n  data () {\r\n    return {\r\n      idcard: this.data.id,\r\n      useruid: null,\r\n      form: [],\r\n      validos: [],\r\n      faturados: []\r\n    }\r\n  },\r\n  created () {\r\n    this.getUser()\r\n  },\r\n  computed: {\r\n    somaIndicacao () {\r\n      if (this.form !== null) {\r\n        return this.form\r\n          .filter(index => (this.date[0] <= moment(index.dataCriacao).format('DD/MM/YYYY') && moment(index.dataCriacao).format('DD/MM/YYYY') <= this.date[1])).length\r\n      } else {\r\n        return 0\r\n      }\r\n    },\r\n    somaValor () {\r\n      if (this.faturados !== null) {\r\n        return this.faturados.filter(index => (this.date[0] <= moment(index.dataCriacao).format('DD/MM/YYYY') && moment(index.dataCriacao).format('DD/MM/YYYY') <= this.date[1])).reduce((a, b) => {\r\n          return parseFloat(a) + parseFloat(b.comissao.valorcomissao)\r\n        }, 0)\r\n      } else {\r\n        return 0\r\n      }\r\n    },\r\n    somaValidos () {\r\n      if (this.validos !== null) {\r\n        return this.validos.filter(index => (this.date[0] <= moment(index.dataCriacao).format('DD/MM/YYYY') && moment(index.dataCriacao).format('DD/MM/YYYY') <= this.date[1])).length\r\n      } else {\r\n        return 0\r\n      }\r\n    },\r\n    somaFaturados () {\r\n      if (this.faturados !== null) {\r\n        return this.faturados.filter(index => (this.date[0] <= moment(index.dataCriacao).format('DD/MM/YYYY') && moment(index.dataCriacao).format('DD/MM/YYYY') <= this.date[1])).length\r\n      } else {\r\n        return 0\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getUser () {\r\n      var user = auth.currentUser\r\n      if (user != null) {\r\n        this.useruid = user.uid\r\n      }\r\n      const reft = db.collection('cardsusers').doc(this.useruid).collection('Cards').doc(this.idcard).collection('Forms').get()\r\n      reft.then(snapshot => {\r\n        snapshot.forEach(doc => {\r\n          this.form.push(doc.data())\r\n        })\r\n      })\r\n      const refa = db.collection('cardsusers').doc(this.useruid).collection('Forms').where('idcard', '==', this.idcard)\r\n        .where('vistoempresa', 'in', ['Venda realizada', 'Conversão realizada', 'Conversa Iniciada', 'Cadastro efetuado', 'Agendamento realizado', 'O Indicado é um lead (ficou interessado)'])\r\n        .get()\r\n      refa.then(snapshot => {\r\n        snapshot.forEach(doc => {\r\n          this.validos.push(doc.data())\r\n        })\r\n      })\r\n      const refc = db.collection('cardsusers').doc(this.useruid).collection('Forms').where('idcard', '==', this.idcard)\r\n        .where('vistoempresa', 'in', ['Venda realizada', 'Cadastro efetuado', 'Conversão realizada'])\r\n        .get()\r\n      refc.then(snapshot => {\r\n        snapshot.forEach(doc => {\r\n          this.faturados.push(doc.data())\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"]}]}